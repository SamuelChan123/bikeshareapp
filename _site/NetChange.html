<!DOCTYPE html>
<!--
  Author: Samuel Chan
	Forty by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

    <head>
	<title>BikeShare Analytics</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<!--[if lte IE 8]><script src="/bikeshareapp/assets/js/ie/html5shiv.js"></script><![endif]-->
	<link rel="stylesheet" href="/bikeshareapp/assets/css/main.css" />
	<!--[if lte IE 9]><link rel="stylesheet" href="/bikeshareapp/assets/css/ie9.css" /><![endif]-->
	<!--[if lte IE 8]><link rel="stylesheet" href="/bikeshareapp/assets/css/ie8.css" /><![endif]-->
</head>


    <body>

        <!-- Wrapper -->
<div id="wrapper">

<!-- Header -->
<header id="header" class="alt style2">
	<a href="http://localhost:4000/bikeshareapp/" class="logo"><strong>BikeShare Analytics</strong> <span>by Samuel Chan</span></a>
	<nav>
		<a href="#menu">Menu</a>
	</nav>
</header>

<!-- Menu -->
<nav id="menu">
	<ul class="links">
        
		    
		
		    
		
		    
		
		    
		
		    
		
		    
		
		    
		
		    
		
		    
		
		    
		        <li><a href="http://localhost:4000/bikeshareapp/">Home</a></li>
	    	
		
		    
		
		
		    
		
		    
		        <li><a href="http://localhost:4000/bikeshareapp/AverageDistance.html">Average Distance</a></li>
		    
		
		    
		        <li><a href="http://localhost:4000/bikeshareapp/BikeShareCommute.html">Bike Share Commuters</a></li>
		    
		
		    
		        <li><a href="http://localhost:4000/bikeshareapp/MostPopularStations.html">Most Popular Stations</a></li>
		    
		
		    
		        <li><a href="http://localhost:4000/bikeshareapp/NetChange.html">Net Change in Bikes</a></li>
		    
		
		    
		        <li><a href="http://localhost:4000/bikeshareapp/SeasonsRidership.html">Seasons and Ridership</a></li>
		    
		
		    
		        <li><a href="http://localhost:4000/bikeshareapp/Trends.html">Interesting Trends/Metrics</a></li>
		    
		
		    
		        <li><a href="http://localhost:4000/bikeshareapp/TripCategoryPass.html">Trip Category + Pass Holders</a></li>
		    
		
		    
		
		    
		
		    
		
	</ul>
	<ul class="actions vertical">
	</ul>
</nav>


        <section id="banner" class="style2">
            <div class="inner">
                <span class="image">
                    <img src="/bikeshareapp/assets/images/bike3.jpg" alt="">
                </span>
                <header class="major">

                    <h1>Net Change in Bikes</h1>

                </header>
                <div class="content">

                    Is there a net change of bikes over the course of a day? If so, when and where should bikes be transported in order to make sure bikes match travel patterns?

                </div>
            </div>
        </section>

    <!-- Main -->
<div id="main">

<!-- One -->
<section id="two" class="spotlights">

	<section>
			<div class="content">
			<div class="inner">
				<header class="major">
				<h3>Analysis</h3>
			</header>
			<b>Roughly a net of 0.288389513108582 bikes lost per day overall from all stations combined, or 0.00430432109 bikes lost per day per station.</b>
			<br />
			<br />

			<p>1. This translates to about a bike lost from a bike share station in LA about once every 4 days </p>
			<p>2. This does make sense, because an increasingly hard to solve issue for bike sharing worldwide is that many users do not remember to park bikes back at their stations. Or, bikes could be lost, broken, and otherwise misplaced. </p>
<p>
			3. The following are two tables and two graphs corresponding to those tables, the first table/graph with the top 10 stations with net inflow of bikes per day, and the second table/graph with the net outflow of bikes per day

</p>
			<p>4. On average, then, transporting bikes from the station with the greatest net inflow of bikes daily to the station with the greatest net outflow of bikes per day, and from the second greatest net inflow to the second greatest net outflow, etc. all the way to the median (net gain of 0.033 bikes) would be the most effective way to preserve a net change of 0 bikes over the course of a day (and hence, year) and to match travel patterns.  
			<br /></p>

			<iframe width="600" height="371" seamless="" frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSDkHpvMe6_URtnaDE1rfvSKauAQcQgESzbr7ernzcGIYiuz_fZAl-odFaRAI2dq172609pAhdRL7Pc/pubchart?oid=126611753&amp;format=interactive"></iframe>
			<br /><br />

			<table style="width:100%">
  <tr>
    <th><u>Station ID</u></th>
    <th><u>Net Change of Bikes Into the Station</u></th>
  </tr>
  <tr>
    <td>3005</td>
    <td>5.165</td>
  </tr>
  <tr>
    <td>3042</td>
    <td>4.787</td>
  </tr>
	<tr>
		<td>3000</td>
		<td>3.468</td>
	</tr>
	<tr>
		<td>3031</td>
		<td>3.326</td>
	</tr>
	<tr>
		<td>3014</td>
		<td>3.049</td>
	</tr>
	<tr>
		<td>3063</td>
		<td>3.049</td>
	</tr>
	<tr>
		<td>3082</td>
		<td>2.978</td>
	</tr>
	<tr>
		<td>3023</td>
		<td>1.923</td>
	</tr>
	<tr>
		<td>3022</td>
		<td>1.663</td>
	</tr>
	<tr>
		<td>3032</td>
		<td>1.169</td>
	</tr>
	</table>


<iframe width="600" height="371" seamless="" frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSDkHpvMe6_URtnaDE1rfvSKauAQcQgESzbr7ernzcGIYiuz_fZAl-odFaRAI2dq172609pAhdRL7Pc/pubchart?oid=794869951&amp;format=interactive"></iframe>

	<br /><br />

	<table style="width:100%">
	<tr>
    <th><br /><u>Station ID</u></th>
    <th><br /><u>Net Change of Bikes Into the Station</u></th>
  </tr>
	<tr>
		<td>3029</td>
		<td>-1.884</td>
	</tr>
	<tr>
		<td>3028</td>
		<td>-2.464</td>
	</tr>
	<tr>
		<td>3049</td>
		<td>-2.491</td>
	</tr>
	<tr>
		<td>3027</td>
		<td>-2.607</td>
	</tr>
	<tr>
		<td>3052</td>
		<td>-2.831</td>
	</tr>
	<tr>
		<td>3007</td>
		<td>-2.966</td>
	</tr>
	<tr>
		<td>3055</td>
		<td>-3.034</td>
	</tr>
	<tr>
		<td>3030</td>
		<td>-3.127</td>
	</tr>
	<tr>
		<td>3024</td>
		<td>-3.318</td>
	</tr>
	<tr>
		<td>3068</td>
		<td>-8.498</td>
	</tr>
</table>

			</div>
		</div>
	</section>
</section>



<!-- Two -->
<section id="three">
	<div class="inner">
		<header class="major">
			<h2>SQL Queries Used</h2>
		</header>
Net Gain or Loss of Bikes from Each Station:
<br /><br />
<pre><code>
SELECT DISTINCT s.StationId,
s.AllRides/
((SELECT DATE_PART('day',(SELECT MAX(StartTime) FROM BikeShare) - (SELECT MIN(StartTime) FROM BikeShare))))
AS NetGainofBikesPerDay

FROM

(SELECT A.StartingId AS StationId, (B.counts2 - A.counts1) AS AllRides

FROM

((SELECT StartingId, COUNT(*)
AS counts1 FROM BikeShare GROUP BY StartingId) AS A
INNER JOIN
(SELECT EndingId, COUNT(*)
AS counts2 FROM BikeShare GROUP BY EndingId) AS B
ON A.StartingId = B.EndingId)

ORDER BY AllRides DESC)
AS s

ORDER BY s.AllRides/((SELECT DATE_PART('day',(SELECT MAX(StartTime) FROM BikeShare) - (SELECT MIN(StartTime) FROM BikeShare)))) DESC

</code></pre>
 Total Net Gain of Bikes Per Day Across All Stations:<br /><br />
<pre><code>
SELECT SUM(NetGainofBikesPerDay) FROM (SELECT DISTINCT s.StationId, s.AllRides/((SELECT DATE_PART('day',(SELECT MAX(StartTime) FROM BikeShare) - (SELECT MIN(StartTime) FROM BikeShare)))) AS NetGainofBikesPerDay

FROM

(SELECT A.StartingId AS StationId, (B.counts2 - A.counts1) AS AllRides

FROM

((SELECT StartingId, COUNT(*)
AS counts1 FROM BikeShare GROUP BY StartingId) AS A
INNER JOIN
(SELECT EndingId, COUNT(*)
AS counts2 FROM BikeShare GROUP BY EndingId) AS B
ON A.StartingId = B.EndingId)

ORDER BY AllRides DESC) AS s ORDER BY s.AllRides/((SELECT DATE_PART('day',(SELECT MAX(StartTime) FROM BikeShare) - (SELECT MIN(StartTime) FROM BikeShare)))) DESC) AS sumofnet
	</code></pre>
Calculating the Median Net Gain of Bikes Per Day:<br /><br />

<pre><code>
CREATE FUNCTION _final_median(anyarray) RETURNS float8 AS $$
 WITH q AS
 (
		SELECT val
		FROM unnest($1) val
		WHERE VAL IS NOT NULL
		ORDER BY 1
 ),
 cnt AS
 (
	 SELECT COUNT(*) AS c FROM q
 )
 SELECT AVG(val)::float8
 FROM
 (
	 SELECT val FROM q
	 LIMIT  2 - MOD((SELECT c FROM cnt), 2)
	 OFFSET GREATEST(CEIL((SELECT c FROM cnt) / 2.0) - 1,0)  
 ) q2;
$$ LANGUAGE SQL IMMUTABLE;

</code></pre>
<pre><code>
CREATE AGGREGATE median(anyelement) (
 SFUNC=array_append,
 STYPE=anyarray,
 FINALFUNC=_final_median,
 INITCOND='{}'
);

</code></pre>
<pre><code>
SELECT median(NetGainofBikesPerDay) FROM

(SELECT DISTINCT s.AllRides/
((SELECT DATE_PART('day',(SELECT MAX(StartTime) FROM BikeShare) - (SELECT MIN(StartTime) FROM BikeShare))))
AS NetGainofBikesPerDay

FROM

(SELECT A.StartingId AS StationId, (B.counts2 - A.counts1) AS AllRides

FROM

((SELECT StartingId, COUNT(*)
AS counts1 FROM BikeShare GROUP BY StartingId) AS A
INNER JOIN
(SELECT EndingId, COUNT(*)
AS counts2 FROM BikeShare GROUP BY EndingId) AS B
ON A.StartingId = B.EndingId)

ORDER BY AllRides DESC)
AS s

ORDER BY s.AllRides/((SELECT DATE_PART('day',(SELECT MAX(StartTime) FROM BikeShare) - (SELECT MIN(StartTime) FROM BikeShare)))) DESC) AS allNet

</code></pre>
	</div>
</section>
</div>


    <!-- Contact -->
<section id="contact">
	<div class="inner">
		<section>
			<form action="https://formspree.io/samuelchaneiusgloria@gmail.com, samuel.chan@duke.edu" method="POST">
				<div class="field half first">
					<label for="name">Name</label>
					<input type="text" name="name" id="name" />
				</div>
				<div class="field half">
					<label for="email">Email</label>
					<input type="text" name="_replyto" id="email" />
				</div>
				<div class="field">
					<label for="message">Message</label>
					<textarea name="message" id="message" rows="6"></textarea>
				</div>
				<ul class="actions">
					<li><input type="submit" value="Send Message" class="special" /></li>
					<li><input type="reset" value="Clear" /></li>
				</ul>
			</form>
		</section>
		<section class="split">
			<section>
				<div class="contact-method">
					<span class="icon alt fa-envelope"></span>
					<h3>Email</h3>
					<a href="#">samuelchaneiusgloria@gmail.com, samuel.chan@duke.edu</a>
				</div>
			</section>
			<section>
				<div class="contact-method">
					<span class="icon alt fa-phone"></span>
					<h3>Phone</h3>
					<span>(410) 428-2378</span>
				</div>
			</section>
			<section>
				<div class="contact-method">
					<span class="icon alt fa-home"></span>
					<h3>Address</h3>
					<span>
					
					
					    Durham,
					
					
					    NC
					
					
					    27705<br />
					
					
					    United States of America
					
					</span>
				</div>
			</section>
		</section>
	</div>
</section>

<!-- Footer -->
	<footer id="footer">
		<div class="inner">
			<ul class="icons">
				
				
				
				
				
				
				
				
				<li><a href="https://github.com/SamuelChan123/BikeShare" class="icon alt fa-github" target="_blank"><span class="label">GitHub</span></a></li>
				
				
				
				<li><a href="https://www.linkedin.com/in/samuelpchan" class="icon alt fa-linkedin" target="_blank"><span class="label">LinkedIn</span></a></li>
				
			</ul>
			<ul class="copyright">
				<li>&copy; BikeShare Analytics by Samuel Chan</li>
	
			</ul>
		</div>
	</footer>

</div>

<!-- Scripts -->
	<script src="http://localhost:4000/bikeshareapp/assets/js/jquery.min.js"></script>
	<script src="http://localhost:4000/bikeshareapp/assets/js/jquery.scrolly.min.js"></script>
	<script src="http://localhost:4000/bikeshareapp/assets/js/jquery.scrollex.min.js"></script>
	<script src="http://localhost:4000/bikeshareapp/assets/js/skel.min.js"></script>
	<script src="http://localhost:4000/bikeshareapp/assets/js/util.js"></script>
	<!--[if lte IE 8]><script src="http://localhost:4000/bikeshareapp/assets/js/ie/respond.min.js"></script><![endif]-->
	<script src="http://localhost:4000/bikeshareapp/assets/js/main.js"></script>


</body>

</html>
